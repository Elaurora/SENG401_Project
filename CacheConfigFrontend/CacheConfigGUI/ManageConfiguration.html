<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Auroras.live | Manage Configuration</title>
</head>
<style>
    html {
        background: #dddddd;
    }
    h1 {
        text-align: center;
        font-family: Arial;
        font-size: 40px;
        font-weight: normal;
        font-style: italic;
        color: white;
        text-shadow: #bbbbbb 3px 2px;
    }
    p {
        width: 50%;
        text-align: justify;
        font-family: Arial;
    }
    table {
        width: 50%;
        font-family: Arial;
        border-collapse: collapse;
    }
    th {
        text-align: left;
    }
</style>
<body>
<h1>Auroras.live | Manage Configuration</h1>
<div style="background: white; width: 60%; margin-left: 20%; margin-right: 20%; align-content: center; border-radius: 10px">
    <br/>
    <div align="center" style="margin: 5%">

        <!-- The main content of this page... -->

        <div id="mainContentParent" style="font-family: Arial; font-weight: bold">
            Local Cache Rules
            <br/>
            <div id="mainContent" style="font-family: Arial; font-weight: normal">

                <!-- The super special string to replace with the rule table request result... -->

                {ruleTable}

                <br/>
                <button id="newCacheRuleButton">New Cache Rule</button>
                <button id="deleteCacheRuleButton">Delete Cache Rule</button>
                <button id="clearCacheButton">Clear Cache</button>
                <br/>
                <p style="font-weight: normal">
                    Above are all the current caching rules for this node server! Press <i>New ___ Rule</i>
                    to add a new rule to a table, press <i>Delete ___ Rule</i> to delete a rule, or press
                    <i>Back</i> to go back to the main page.
                </p>
                <button id="backButton">Back</button>
            </div>
        </div>

        <!-- Form for "New Cache Rule" -->

        <div id="newCacheRuleFormParent" style="display: none; position: fixed; width: 100%; height: 100%; top: 0; left: 0; background-color: rgba(0, 0, 0, 0.5)">
            <div id="newCacheRuleForm" style="position: absolute; left: 40%; top: 17%; opacity: 1.0">
                <form action="/SENG401/manageconfig/submit/newcacherule" method="post" style="background: white; max-width: 300px; min-width: 250px; padding: 15px; border: 1px solid black; border-radius: 10px; opacity: 1">
                    <p style="width: 100%; margin-left: 10%">
                        <b>New Cache Rule</b>
                        <br/>
                        <br/>
                        local_ttl:<br/>
                        <input name="local_ttl" type="text">
                        <br/>
                        global_ttl:<br/>
                        <input name="global_ttl" type="text">
                        <br/>
                        match variables:<br/>
                        <input name="match_vars" type="text" style="overflow: scroll">
                        <br/>
                        <br/>
                        <br/>
                        <button id="submitNewCacheRuleForm" type="submit">Submit</button>
                        <button id="cancelNewCacheRuleForm" type="reset">Cancel</button>
                    </p>
                </form>
            </div>
        </div>

        <!-- Form for "Delete Cache Rule" -->

        <div id="deleteCacheRuleFormParent" style="display: none; position: fixed; width: 100%; height: 100%; top: 0; left: 0; background-color: rgba(0, 0, 0, 0.5)">
            <div id="deleteCacheRuleForm" style="position: absolute; left: 40%; top: 17%; opacity: 1.0">
                <form action="/SENG401/manageconfig/submit/deletecacherule" method="post" style="background: white; max-width: 300px; min-width: 250px; padding: 15px; border: 1px solid black; border-radius: 10px; opacity: 1">
                    <p style="width: 100%; margin-left: 10%">
                        <b>Delete Cache Rule</b>
                        <br/>
                        <br/>
                        rule_id:<br/>
                        <input name="rule_id" type="text">
                        <br/>
                        <br/>
                        <br/>
                        <button id="submitDeleteCacheRuleForm" type="submit">Submit</button>
                        <button id="cancelDeleteCacheRuleForm" type="reset">Cancel</button>
                    </p>
                </form>
            </div>
        </div>
    </div>
    <br/>
</div>
</body>
</html>

<script>
    // For "New Cache Rule"...

    document.getElementById("newCacheRuleButton").onclick = function () {
        document.getElementById('newCacheRuleFormParent').style.display = "block";
    };

    document.getElementById("submitNewCacheRuleForm").onclick = function () {
        document.getElementById('newCacheRuleFormParent').style.display = "none";
    };

    document.getElementById("cancelNewCacheRuleForm").onclick = function () {
        document.getElementById('newCacheRuleFormParent').style.display = "none";
    };

    // For "Delete Cache Rule"...

    document.getElementById("deleteCacheRuleButton").onclick = function () {
        document.getElementById('deleteCacheRuleFormParent').style.display = "block";
    };

    document.getElementById("submitDeleteCacheRuleForm").onclick = function () {
        document.getElementById('deleteCacheRuleFormParent').style.display = "none";
    };

    document.getElementById("cancelDeleteCacheRuleForm").onclick = function () {
        document.getElementById('deleteCacheRuleFormParent').style.display = "none";
    };

    //  For "Clear Cache"...

    document.getElementById("clearCacheButton").onclick = function () {
        var postRequest = document.createElement("form");

        postRequest.setAttribute("method", "post");
        postRequest.setAttribute("action", "/SENG401/manageconfig/submit/clearcache");

        document.body.appendChild(postRequest);

        postRequest.submit();
    };

    //  For "Back"...

    document.getElementById("backButton").onclick = function () {
        location.href = "/SENG401/config";
    };
</script>
