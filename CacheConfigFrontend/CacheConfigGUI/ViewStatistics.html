<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Auroras.live | View Statistics</title>
</head>
<style>
    html {
        background: #dddddd;
    }
    h1 {
        text-align: center;
        font-family: Arial;
        font-size: 40px;
        font-weight: normal;
        font-style: italic;
        color: white;
        text-shadow: #bbbbbb 3px 2px;
    }
    p {
        width: 50%;
        text-align: justify;
        font-family: Arial;
    }
    table {
        width: 50%;
        font-family: Arial;
        border-collapse: collapse;
    }
    th {
        text-align: left;
    }
</style>
<body onload="buildHtmlTable('#localTable'); buildHtmlTable('#globalTable')">
<h1>Auroras.live | View Statistics</h1>
<div style="background: white; width: 60%; margin-left: 20%; margin-right: 20%; align-content: center; border-radius: 10px">
    <br/>
    <div align="center" style="margin: 5%">

        <!-- The absolute most important part of this entire operation!!!!11!!1!2! -->

        <p>
        </p>
        <div style="width: 50%; font-family: Arial; font-weight: bold">
            Local Cache Statistics
        </div>
        <table id="localTable" border="1" style="height: 50px"></table>
        <br/>
        <div style="width: 50%; font-family: Arial; font-weight: bold">
            Global Cache Statistics
        </div>
        <table id="globalTable" border="1" style="height: 50px"></table>
        <p>
            Above are the cache hit and miss counts for this node server compared to the
            global server! Press <i>Clear Cache</i> to clear the caching history and all
            current rules, or press <i>Back</i> to go back to the main page.
        </p>
        <button id="clearCacheButton">Clear Cache</button>
        <button id="backButton">Back</button>
    </div>
    <br/>
</div>
</body>
</html>

<!-- This next part is shamelessly ripped from stackoverflow... -->
<!-- This is ultimately only here to give a better idea of what this page should look like. -->

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.0/jquery.min.js"></script>
<script>
    var exampleJSONList = [
        { "record_id": 1, "hit_count": 0, "miss_count": "A billion k'zillion" },
    ];

    // Builds the HTML Table out of myList.
    function buildHtmlTable(selector) {
        var columns = addAllColumnHeaders(exampleJSONList, selector);

        for (var i = 0; i < exampleJSONList.length; i++) {
            var row$ = $('<tr/>');
            for (var colIndex = 0; colIndex < columns.length; colIndex++) {
                var cellValue = exampleJSONList[i][columns[colIndex]];
                if (cellValue == null) cellValue = "";
                row$.append($('<td/>').html(cellValue));
            }
            $(selector).append(row$);
        }
    }

    // Adds a header row to the table and returns the set of columns.
    // Need to do union of keys from all records as some records may not contain
    // all records.
    function addAllColumnHeaders(myList, selector) {
        var columnSet = [];
        var headerTr$ = $('<tr/>');

        for (var i = 0; i < myList.length; i++) {
            var rowHash = myList[i];
            for (var key in rowHash) {
                if ($.inArray(key, columnSet) == -1) {
                    columnSet.push(key);
                    headerTr$.append($('<th/>').html(key));
                }
            }
        }
        $(selector).append(headerTr$);

        return columnSet;
    }
</script>
<script>
    document.getElementById("backButton").onclick = function () {
        location.href = "CacheConfigurator.html";
    };
</script>